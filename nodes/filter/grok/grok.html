<script src="../../vendor/select2/js/select2.min.js"></script>
<link rel="stylesheet" href="../../vendor/select2/css/select2.min.css">
<script type="text/x-red" data-template-name="ls-flt-grok">
    <div class='form-row'>
        <label for='node-input-ls_match'>解析规则</label>
        <select id='grok-match-select' multiple="multiple" name="state">
        </select>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_match'>规则语句</label>
        <input type='text' id='node-input-ls_match' placeholder='{}'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_break_on_match'>Break on match</label>
        <select id='node-input-ls_break_on_match'>
            <option value='true'>true</option>
            <option value='false'>false</option>
        </select>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_add_field'>Add field</label>
        <input type='text' id='node-input-ls_add_field' placeholder='{}'>
    </div>
    <!--<div class='form-row'>
        <label for='node-input-ls_add_tag'>Add tag</label>
        <input type='text' id='node-input-ls_add_tag' placeholder='[]'>
    </div>-->

    <!--<div class='form-row'>
        <label for='node-input-ls_keep_empty_captures'>Keep empty captures</label>
        <select id='node-input-ls_keep_empty_captures'>
            <option value='true'>true</option>
            <option value='false'>false</option>
        </select>
    </div>-->


    <!--<div class='form-row'>
        <label for='node-input-ls_named_captures_only'>Named captures only</label>
        <select id='node-input-ls_named_captures_only'>
            <option value='true'>true</option>
            <option value='false'>false</option>
        </select>
    </div>-->
    <div class='form-row'>
        <label for='node-input-ls_overwrite'>Overwrite</label>
        <input type='text' id='node-input-ls_overwrite' placeholder='[]'>
    </div>
    <!--<div class='form-row'>
        <label for='node-input-ls_pattern_definitions'>Pattern definitions</label>
        <input type='text' id='node-input-ls_pattern_definitions' placeholder='{}'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_patterns_dir'>Patterns dir</label>
        <input type='text' id='node-input-ls_patterns_dir' placeholder='[]'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_patterns_files_glob'>Patterns files glob</label>
        <input type='text' id='node-input-ls_patterns_files_glob' placeholder='*'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_periodic_flush'>Periodic flush</label>
        <select id='node-input-ls_periodic_flush'>
            <option value='true'>true</option>
            <option value='false'>false</option>
        </select>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_remove_field'>Remove field</label>
        <input type='text' id='node-input-ls_remove_field' placeholder='[]'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_remove_tag'>Remove tag</label>
        <input type='text' id='node-input-ls_remove_tag' placeholder='[]'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_tag_on_failure'>Tag on failure</label>
        <input type='text' id='node-input-ls_tag_on_failure' placeholder='["_grokparsefailure"]'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_tag_on_timeout'>Tag on timeout</label>
        <input type='text' id='node-input-ls_tag_on_timeout' placeholder='_groktimeout'>
    </div>
    <div class='form-row'>
        <label for='node-input-ls_timeout_millis'>Timeout millis</label>
        <input type='number' id='node-input-ls_timeout_millis' placeholder='30000'>
    </div>-->

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-file"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="ls-flt-grok">
    <p>A Logstash filter node for grok</p>
    <iframe src="https://www.elastic.co/guide/en/logstash/current/plugins-filters-grok.html" style="width:100%;margin:0;padding:0;border:none;height:400px;" />
</script>

<script type="text/javascript">
    RED.nodes.registerType('ls-flt-grok',{
        category: 'Logstash-filter',
        defaults: {
            name: {value:""},
            ls_add_field: {value:"", required: false},ls_add_tag: {value:"", required: false},ls_break_on_match: {value:"true", required: false},ls_keep_empty_captures: {value:"false", required: false},ls_match: {value:"", required: false},ls_named_captures_only: {value:"true", required: false},ls_overwrite: {value:"", required: false},ls_pattern_definitions: {value:"", required: false},ls_patterns_dir: {value:"", required: false},ls_patterns_files_glob: {value:"", required: false},ls_periodic_flush: {value:"false", required: false},ls_remove_field: {value:"", required: false},ls_remove_tag: {value:"", required: false},ls_tag_on_failure: {value:"", required: false},ls_tag_on_timeout: {value:"", required: false},ls_timeout_millis: {value:"", required: false}
        },
        inputs:1,
        outputs:1,
        icon: 'filter.png',
        color: 'white',
        paletteLabel: "grok",
        label: function() {
            return this.name || "LS grok";
        }
    });
</script>
